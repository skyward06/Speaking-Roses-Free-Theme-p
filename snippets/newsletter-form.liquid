<!-- start newsletter-form.liquid (SNIPPET) -->
{%- comment -%}
  This is a required section for the Shopify Theme Store.
  It is available when you add "Newsletter" section on the Theme Editor.
  Theme Store required settings
  - Heading: title of the newsletter section
  - Subheading: description of the newsletter section
{%- endcomment -%}
<div class="newsletter-form full">
    <h3 class="news_letter_title">{{ settings.newsletter_title }}</h3>

    {%- assign formId = 'Contact_' | append: section.id -%}
    {%- form 'customer', id: formId -%}  
    {%- if form.posted_successfully? or form.email -%}
            <p class="thank_you">
                {{ settings.thank_you_newsletter }}

                <span style='color:{{ settings.coupon_text_color }}'>
                <strong>{{ settings.cupom_code_newsletter }}</strong> 
                </span>
            </p>
            <script type="lazyload_int">
                setTimeout(function(){
                    const $mainFooter = $('.footer-section').eq(0);

                    var docHeight = $mainFooter.offset().top + $mainFooter.height();

                    scroll(0, docHeight - window.innerHeight);

                    document.addEventListener('scroll', function(){
                        if (docHeight != ($mainFooter.offset().top + $mainFooter.height())) {
                            docHeight = $mainFooter.offset().top + $mainFooter.height();
                            scroll(0, docHeight - window.innerHeight);
                        }
                    });
                });
            </script>

        {%- else -%}
            <input type="hidden" name="contact[tags]" value="newsletter">
            <div class="inputControlNewsletter">
                <input type="email"
                name="contact[email]"
                class="emailNewsletterForm"
                id="Email-{{ section_id }}"
                value="{%- if customer.email != blank -%}{{ customer.email }}{%- endif -%}"
                placeholder="{{ settings.newsletter_placeholder }}"
                required
                >
            </div>
            <div class="buttonControlNewsletterForm">
                <button type="submit" name="commit" id="Subscribe-{{ section_id }}" class="buttonNewsletterForm">
                    {{ settings.newsletter_submit }}
                </button>
            </div>


            {%- if form.errors -%}
            <div class="error_message">{{ form.errors | default_errors }}</div>
            {%- endif -%}

        {%- endif -%}
    {%- endform -%}
</div>

<style>
    .newsletter-klaviyo .email-signup-form {
        display: block;
        max-width: 100%;
        font-family: var(--copyBodyFont), arial, sans-serif;
    }
    .newsletter-klaviyo .email-signup-form .klaviyo_form_actions button {
        width: 100%;
        background-color: var(--newsletter-submit-color);
        color: var(--newsletter-submit-text-color);
        text-transform: uppercase;
        height: 44px;
        font-weight: bold;
        cursor: pointer;
        border: none;
        transition: background-color 0.2s ease-out;
        border-radius: 0;
        padding: 9px 0;
        font-size: 14px;
    }
    .newsletter-klaviyo .email-signup-form .klaviyo_form_actions button:hover,
    .newsletter-klaviyo .email-signup-form .klaviyo_form_actions button:active	{
        background-color: var(--newsletter-submit-hover);
        color: var(--newsletter-submit-text-color-hover);
    }
    .newsletter-klaviyo .email-signup-form .klaviyo_messages {
        width: 100%;
    }
    .newsletter-klaviyo .email-signup-form .klaviyo_field_group,
    .newsletter-klaviyo .email-signup-form .klaviyo_field_group input {
        background-color: {{ settings.newsletter_input_color }};
    }
    .input-group-btn .atcButtonNewsletterForm,
    .input-group-btn .atcButtonMailChimp {
        width: 100%;
        background-color: var(--newsletter-submit-color);
        color: var(--newsletter-submit-text-color);
        text-transform: uppercase;
        height: 44px;
        font-weight: bold;
        cursor: pointer;
        border: none;
        transition: background-color 0.2s ease-out;
        border-radius: 0;
        padding: 9px 0;
    }
    .input-group-btn .atcButtonNewsletterForm:hover,
    .input-group-btn .atcButtonMailChimp:hover,
    .input-group-btn .atcButtonNewsletterForm:active,
    .input-group-btn .atcButtonMailChimp:active {
        background-color: var(--newsletter-submit-hover);
        color: var(--newsletter-submit-text-color-hover);
    }
    .recover-password-form{
        display: none;
      }
    .form-success{
        color: #56ad6a;
        border: 1px solid #56ad6a;
        border-radius: 3px;
        background-color: #ecfef0;
        padding: 0 15px;
        max-width: 300px;
        margin-bottom: 20px;
      }
    .newsletter-form.full .contact-form {
        margin-bottom: 18px;
        display: flex;
        max-width: 100%;
        font-family: Helvetica, arial, sans-serif;
        flex-wrap: wrap;
    }
    .newsletter-form.full .contact-form .inputControlNewsletter {
        flex: 1 0 50%;
        width: 50%;
        margin: 0;
    }
    .newsletter-form.full .contact-form .inputControlNewsletter .emailNewsletterForm {
        height: 44px;
        border: none;
        width: 100%;
        padding: 10px;
    }
    .newsletter-form.full .contact-form .buttonControlNewsletterForm {
        width: 40%;
    }
    .newsletter-form.full .contact-form .buttonControlNewsletterForm .buttonNewsletterForm {
        width: 100%;
        background-color: var(--newsletter-submit-color);
        color: var(--newsletter-submit-text-color);
        text-transform: uppercase;
        height: 44px;
        font-weight: bold;
        cursor: pointer;
        border: none;
        transition: background-color 0.2s ease-out;
        border-radius: 0;
        padding: 9px 0;
        font-size: 12px;
    }
    .newsletter-form.full .contact-form .buttonControlNewsletterForm .buttonNewsletterForm:hover,
    .newsletter-form.full .contact-form .buttonControlNewsletterForm .buttonNewsletterForm:active {
        background-color: var(--newsletter-submit-hover);
        color: var(--newsletter-submit-text-color-hover);
    }
    @media (max-width: 1019px) {
        .newsletter-klaviyo .email-signup-form .klaviyo_form_actions button { 
        padding: 11px 0;
        }
        .newsletter-form.full .contact-form {
        flex-wrap: wrap;
        }
        .newsletter-form.full .contact-form .errors {
        width: 100%;
        }
        .newsletter-form.full .contact-form .errors ul {
        list-style: none;
        color: red;
        }
        .newsletter-form.full .contact-form .buttonControlNewsletterForm .buttonNewsletterForm {
        font-size: 13px;
        }
        .newsletter-form.full .contact-form {
            margin-bottom: 0;
        }
    }
    @media (max-width: 767px) {
        .newsletter-klaviyo .email-signup-form .klaviyo_form_actions button{
            padding: 14px 0;
            font-size: 10px;
        }
        .newsletter-form.full .contact-form {
            height: 36px;
        }
        .newsletter-form.full .contact-form .inputControlNewsletter .emailNewsletterForm {
            width: 100%;
            height: 100%;
            padding: 0 10px;
            margin: 0;
            float: left;
            border: solid 1px #ccc;
            color: var(--vasta-font-color-menu-mobile, #444);
            line-height: 20px;
        }
        .newsletter-form.full .contact-form .buttonControlNewsletterForm .buttonNewsletterForm {
            text-transform: uppercase;
            background-color: var(--newsletter-submit-color);
            height: 36px;
            font-size: 10px;
        }
    }
</style>
